plugins {
    id 'java'
    id 'com.palantir.git-version' version '0.12.2'
}

group 'aspecte'
version gitVersion()

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

def details = versionDetails()
println(details.gitHash)
ant.replaceregexp(match:'private static final String versionHash = ".*";', replace: "private static final String versionHash = \"$details.gitHash\";", flags:'g', byline:true) {
    fileset(dir: "$rootDir/src/main/java", includes: 'Main.java')
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
}